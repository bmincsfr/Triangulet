(function(){
  if (window.__triAutoSenderRunning) {
    console.warn("Auto-sender already running. Use window.__triAutoSender.stop() to stop it.");
    return;
  }

  const MESSAGE = "ever wanted hacks for triangulet? well here you go! use https://trian.neocities.org/ or https://blacket.neocities.org/ for hacks or cheats on triangulet!!";
  const INTERVAL_MS = 3000; // 3 seconds

  function findInput() {
    return document.querySelector("#chat-input");
  }

  function simulateEnter(el) {
    el.focus();
    ["keydown","keypress","keyup"].forEach(type => {
      const ev = new KeyboardEvent(type, { key:"Enter", code:"Enter", keyCode:13, which:13, bubbles:true });
      el.dispatchEvent(ev);
    });
  }

  function send() {
    const input = findInput();
    if (!input) return;
    input.value = MESSAGE;
    input.dispatchEvent(new Event("input",{bubbles:true}));
    input.dispatchEvent(new Event("change",{bubbles:true}));
    simulateEnter(input);
    console.log("Sent @", new Date().toLocaleTimeString());
  }

  send();
  const int = setInterval(send, INTERVAL_MS);

  window.__triAutoSenderRunning = true;
  window.__triAutoSender = { stop(){ clearInterval(int); delete window.__triAutoSenderRunning; delete window.__triAutoSender; console.log("Stopped."); } };
})();
